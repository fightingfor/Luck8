# KL8 预测器

一个基于Flutter开发的快乐8彩票预测应用，使用多维度分析和机器学习算法进行号码预测。

## 项目结构

```
kl8_predictor_app/
├── lib/
│   ├── main.dart              # 应用入口
│   ├── models/                # 数据模型
│   │   ├── lottery_draw.dart  # 开奖记录模型
│   │   └── prediction_record.dart  # 预测记录模型
│   ├── pages/                 # 页面
│   │   ├── home_page.dart     # 主页
│   │   ├── prediction_page.dart # 预测页面
│   │   └── splash_screen.dart  # 启动页
│   ├── services/              # 服务层
│   │   ├── api_service.dart   # API服务
│   │   ├── database_service.dart # 数据库服务
│   │   └── kl8_predictor.dart # 预测算法核心
│   └── components/            # UI组件
│       └── prediction_card.dart # 预测结果卡片
├── pubspec.yaml               # 依赖配置
└── README.md                  # 项目说明
```

## 预测算法说明

### 1. 数据分析维度

#### 1.1 基础数据分析 (30%)
- **全量数据分析** (15%)
  - 分析所有历史数据
  - 使用时间衰减权重
  
- **最近数据分析** (15%)
  - 分析最近30天数据
  - 不使用时间权重

#### 1.2 趋势分析 (50%)
- **走势模式分析** (20%)
  - 热转冷号码识别 (-0.5以下变化率)
  - 冷转热号码识别 (0.5以上变化率)
  - 稳定号码识别 (±0.2以内变化率)
  - 波动号码识别 (其他变化率)

- **热门号码分析** (20%)
  - 分析最近100期热门号码
  - 根据出现频率动态计算权重
  - 分析号码对出现频率
  - 分析奇偶组合模式
  - 分析区间组合模式

- **同期数据分析** (10%)
  - 分析同日期开奖记录
  - 分析同星期开奖记录
  - 分析重合号码

#### 1.3 平衡性指标 (10%)
- **奇偶平衡** (10%)
  - 分析奇偶比例
  - 动态调整权重以保持平衡

### 2. 预测流程

1. **数据准备**
   - 加载历史开奖数据
   - 确保数据时效性（1小时更新）
   - 异常处理和缓存机制

2. **并行数据分析**
   - 同时执行多维度分析
   - 使用Future.wait提高性能
   - 实时进度反馈

3. **号码评分**
   - 综合各维度分析结果
   - 动态权重计算
   - 添加随机波动(±5%)

4. **智能选号**
   - 使用轮盘赌选择法
   - 从前20个高分号码中选择
   - 根据得分设置选中概率

5. **严格验证**
   - 和值范围验证（均值±3个标准差）
   - 区间分布验证（每个区间1-6个号码）
   - 连号数量验证（最多5个连号）
   - 自适应验证阈值

### 3. 容错机制

1. **验证阈值自适应**
   - 初始标准差阈值3.0
   - 每20次尝试增加0.5
   - 运行超过15秒自动放宽

2. **超时保护**
   - 30秒超时机制
   - 保存最后一次生成结果
   - 确保始终返回预测号码

3. **数据安全**
   - 异常处理机制
   - 数据加载失败保护
   - 使用缓存数据继续

4. **性能优化**
   - 并行数据分析
   - 智能缓存机制
   - 详细日志记录

### 4. 验证标准

1. **和值验证**
   - 计算最近50期和值统计
   - 动态标准差阈值
   - 自适应验证范围

2. **区间分布**
   - 四个区间（1-20,21-40,41-60,61-80）
   - 每个区间至少1个号码
   - 每个区间最多6个号码

3. **连号控制**
   - 最多允许5个连号
   - 动态连号检测
   - 平衡性验证

4. **组合验证**
   - 奇偶比例平衡
   - 区间分布均匀
   - 重合号码控制

## 使用说明

1. **环境要求**
   - Flutter 3.0+
   - Dart 2.17+
   - SQLite 3+

2. **安装步骤**
   ```bash
   cd kl8_predictor_app
   flutter pub get
   flutter run
   ```

3. **主要功能**
   - 实时预测：生成下一期预测号码
   - 历史记录：查看历史预测记录
   - 中奖统计：统计预测准确率
   - 趋势分析：查看号码走势
   - 收藏功能：收藏特定预测组合

4. **注意事项**
   - 定期更新开奖数据
   - 预测结果仅供参考
   - 请理性购彩，注意风险

## 开发计划

1. **近期计划**
   - [ ] 优化预测算法
   - [ ] 添加更多数据分析维度
   - [ ] 改进UI/UX设计

2. **长期计划**
   - [ ] 引入机器学习模型
   - [ ] 添加更多彩种支持
   - [ ] 开发数据可视化功能

## 贡献指南

1. Fork 项目
2. 创建特性分支
3. 提交更改
4. 推送到分支
5. 创建 Pull Request

## 免责声明

本应用仅供学习和研究使用，不构成任何购彩建议。请遵守当地法律法规，理性购彩。
